# ü§ñ Telegram Tarif Bot

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –æ–ø–ª–∞—Ç–æ–π —á–µ—Ä–µ–∑ –ÆKassa, –æ–ø—Ä–æ—Å–Ω–∏–∫–∞–º–∏ –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é.

## üìã –¢–∞—Ä–∏—Ñ—ã

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|-------|------|-------------|
| üíö –ë–∞–∑–æ–≤—ã–π | 8 000 ‚ÇΩ | –ü–æ–ª–Ω—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫ + –∞—é—Ä–≤–µ–¥ + —Ñ–æ—Ç–æ –∞–Ω–∞–ª–∏–∑–æ–≤ + –≤—ã–±–æ—Ä —Å–ª–æ—Ç–∞ |
| üíé –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ | 20 000 ‚ÇΩ | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å –ø–æ–ª–Ω—ã–º —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ–º |
| üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è | 5 000 ‚ÇΩ | –ë–µ–∑ –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤, —Ñ–æ—Ç–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| üåø –õ–∞–π—Ç | 3 000 ‚ÇΩ | –¢–æ–ª—å–∫–æ –∞—é—Ä–≤–µ–¥-–æ–ø—Ä–æ—Å–Ω–∏–∫ (–ø–æ –ø–æ–ª—É) |

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–°–µ—Ä–≤–µ—Ä**: Ubuntu 24.04 (–∏–ª–∏ –ª—é–±–æ–π Linux —Å Docker)
- **Docker**: –≤–µ—Ä—Å–∏—è 20.10+
- **Docker Compose**: –≤–µ—Ä—Å–∏—è 2.0+
- **Telegram Bot Token**: –ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather)
- **–ÆKassa**: –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞ –Ω–∞ [yookassa.ru](https://yookassa.ru)

### –®–∞–≥ 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/kiore73/telegram-tarif-bot.git
cd telegram-tarif-bot
```

### –®–∞–≥ 2. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ username –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π **—Ç–æ–∫–µ–Ω** (—Ñ–æ—Ä–º–∞—Ç: `123456:ABC-DEF1234...`)

### –®–∞–≥ 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [yookassa.ru](https://yookassa.ru)
2. –°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–ª—é—á–∏ API**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Shop ID** –∏ **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á**
5. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [—Ç–µ—Å—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω](https://yookassa.ru/developers/payment-acceptance/testing-and-going-live/testing)

### –®–∞–≥ 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
nano .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª `.env`:

```env
# === –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï ===

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

# Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
# –£–∑–Ω–∞—Ç—å —Å–≤–æ–π ID: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /start –±–æ—Ç—É @userinfobot
ADMIN_IDS=123456789,987654321

# PostgreSQL (–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–µ–Ω—è–µ—Ç–µ –ø–∞—Ä–æ–ª—å –≤ docker-compose)
DATABASE_URL=postgresql+asyncpg://botuser:botpassword@postgres:5432/tarif_bot

# === –ÆKASSA ===
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
YOOKASSA_RETURN_URL=https://t.me/your_bot_username
YOOKASSA_DEFAULT_RECEIPT_EMAIL=receipt@yourdomain.com
YOOKASSA_VAT_CODE=1
YOOKASSA_PAYMENT_MODE=full_payment
YOOKASSA_PAYMENT_SUBJECT=service
YOOKASSA_ENABLED=true

# === –¢–ê–†–ò–§–´ (—Ü–µ–Ω—ã –≤ —Ä—É–±–ª—è—Ö) ===
TARIFF_BASIC_PRICE=8000
TARIFF_EXTENDED_PRICE=20000
TARIFF_REPEAT_PRICE=5000
TARIFF_LITE_PRICE=3000

# === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û ===
TIMEZONE=Europe/Moscow
UPLOAD_DIR=./uploads
PHOTO_RETENTION_DAYS=30
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: `YOOKASSA_RETURN_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (`https://t.me/–∏–º—è_–±–æ—Ç–∞`), —á—Ç–æ–±—ã –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—É–ª—Å—è –≤ —á–∞—Ç.

### –®–∞–≥ 5. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–±–æ—Ç + PostgreSQL)
docker-compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
docker-compose ps
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`:
```
NAME                    STATUS
telegram-tarif-bot-bot-1       Up
telegram-tarif-bot-postgres-1  Up
```

### –®–∞–≥ 6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
docker-compose exec bot alembic revision --autogenerate -m "initial"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec bot alembic upgrade head
```

### –®–∞–≥ 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` ‚Äî –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –≤—ã–±–æ—Ä–æ–º —Ç–∞—Ä–∏—Ñ–æ–≤
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/admin` ‚Äî –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è ADMIN_IDS)

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –õ–æ–≥–∏ –±–æ—Ç–∞
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs bot

# –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f --tail 50 bot
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
docker-compose restart bot
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
docker-compose down
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```bash
git pull
docker-compose up -d --build
```

### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ç–æ
```bash
# –í—Ä—É—á–Ω—É—é (—É–¥–∞–ª–∏—Ç —Ñ–æ—Ç–æ —Å—Ç–∞—Ä—à–µ PHOTO_RETENTION_DAYS –¥–Ω–µ–π)
docker-compose exec bot python scripts/cleanup_photos.py

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ cron (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00)
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab -e:
# 0 3 * * * cd /path/to/telegram-tarif-bot && docker-compose exec -T bot python scripts/cleanup_photos.py
```

---

## üõ† –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–ö–æ–º–∞–Ω–¥–∞ `/admin` –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —á—å–∏ Telegram ID —É–∫–∞–∑–∞–Ω—ã –≤ `ADMIN_IDS`.

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| ‚ûï –°–æ–∑–¥–∞—Ç—å —Å–ª–æ—Ç | –í–≤–æ–¥ –¥–∞—Ç—ã ‚Üí –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (30‚Äì60 –º–∏–Ω) |
| üóë –£–¥–∞–ª–∏—Ç—å —Å–ª–æ—Ç | –í—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –±—É–¥—É—â–∏—Ö —Å–ª–æ—Ç–æ–≤ |
| üìã –°–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã | –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ |
| üìä –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 –∑–∞–ø–∏—Å–µ–π |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram-tarif-bot/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, Dispatcher
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py         # –í—Å–µ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ texts.py             # –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (RU)
‚îÇ   ‚îú‚îÄ‚îÄ middlewares.py        # DB session middleware
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py         # /start + –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã –ÆKassa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ intake.py        # –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö (–∏–º—è, –≤–æ–∑—Ä–∞—Å—Ç, –≤–µ—Å)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ questionnaire.py # –î–≤–∏–∂–æ–∫ –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photos.py        # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∞–Ω–∞–ª–∏–∑–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slots.py         # –í—ã–±–æ—Ä —Å–ª–æ—Ç–∞ + –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gender.py        # –í—ã–±–æ—Ä –ø–æ–ª–∞ (–¥–ª—è –ª–∞–π—Ç-—Ç–∞—Ä–∏—Ñ–∞)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py         # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ questionnaire_engine.py  # –ü–∞—Ä—Å–µ—Ä .md –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yookassa_service.py      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slot_service.py          # CRUD —Å–ª–æ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking_service.py       # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photo_service.py         # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notification_service.py  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º
‚îÇ   ‚îî‚îÄ‚îÄ states/
‚îÇ       ‚îî‚îÄ‚îÄ user_states.py   # FSM-—Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ base.py              # SQLAlchemy engine + Base
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # –ú–æ–¥–µ–ª–∏: User, Payment, Booking, Slot...
‚îÇ   ‚îî‚îÄ‚îÄ migrations/          # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ settings.py          # Pydantic Settings –∏–∑ .env
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ cleanup_photos.py    # –ö—Ä–æ–Ω-—Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ —Ñ–æ—Ç–æ
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

---

## üîÑ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

### –ë–∞–∑–æ–≤—ã–π / –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ
```
/start ‚Üí –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ ‚Üí –û–ø–ª–∞—Ç–∞ –ÆKassa ‚Üí –ò–º—è ‚Üí –§–∞–º–∏–ª–∏—è ‚Üí –í–æ–∑—Ä–∞—Å—Ç ‚Üí –í–µ—Å
‚Üí –ë–∞–∑–æ–≤—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫ (73 –≤–æ–ø—Ä–æ—Å–∞) ‚Üí –ê—é—Ä–≤–µ–¥-–æ–ø—Ä–æ—Å–Ω–∏–∫ (–ø–æ –ø–æ–ª—É)
‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ ‚Üí –í—ã–±–æ—Ä —Å–ª–æ—Ç–∞ ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
```

### –ü–æ–≤—Ç–æ—Ä–Ω–∞—è
```
/start ‚Üí –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ ‚Üí –û–ø–ª–∞—Ç–∞ ‚Üí –ò–º—è ‚Üí –§–∞–º–∏–ª–∏—è ‚Üí –í–æ–∑—Ä–∞—Å—Ç
‚Üí –§–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Üí –í—ã–±–æ—Ä —Å–ª–æ—Ç–∞ ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

### –õ–∞–π—Ç
```
/start ‚Üí –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ ‚Üí –û–ø–ª–∞—Ç–∞ ‚Üí –ò–º—è ‚Üí –§–∞–º–∏–ª–∏—è ‚Üí –í–æ–∑—Ä–∞—Å—Ç ‚Üí –í–µ—Å
‚Üí –í—ã–±–æ—Ä –ø–æ–ª–∞ ‚Üí –ê—é—Ä–≤–µ–¥-–æ–ø—Ä–æ—Å–Ω–∏–∫ ‚Üí –í—ã–±–æ—Ä —Å–ª–æ—Ç–∞ ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

---

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|-----------|
| –Ø–∑—ã–∫ | Python 3.11+ |
| Telegram API | aiogram 3.x |
| ORM | SQLAlchemy 2.0 (async) |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | PostgreSQL 16 + asyncpg |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | Alembic |
| –û–ø–ª–∞—Ç–∞ | –ÆKassa SDK |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | Pydantic Settings |
| –î–µ–ø–ª–æ–π | Docker + Docker Compose |

---

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `docker-compose logs bot` –Ω–∞ –æ—à–∏–±–∫–∏ |
| `BOT_TOKEN` –æ—à–∏–±–∫–∞ | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |
| –ë–î –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ postgres –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker-compose ps` |
| –û–ø–ª–∞—Ç–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω |
| –ú–∏–≥—Ä–∞—Ü–∏—è –ø–∞–¥–∞–µ—Ç | –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞: `docker-compose exec postgres psql -U botuser -d tarif_bot` |
